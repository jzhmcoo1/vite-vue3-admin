var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&o(e,t,a[t]);return e},d=(e,l)=>a(e,t(l));import{y as n,M as i,_ as c,N as f}from"./index.3831b623.js";import{bH as p,bI as b,c3 as m,d as v,l as y,b as _,A as k,aM as I,aN as h,P as w,cO as C,k as O,j as g,o as j,cN as P,c as z,y as L,z as M,bw as S,h as x,t as N,bz as V,ad as $,F,f as D,e as H}from"./vendor.02104a40.js";var q={},A=b.exports;Object.defineProperty(q,"__esModule",{value:!0}),q.progressStatuses=J=q.progressProps=void 0;var B=A(p),E=m,G=(0,E.tuple)("normal","exception","active","success");q.progressStatuses=G;var U=(0,E.tuple)("line","circle","dashboard"),W=(0,E.tuple)("default","small"),J=q.progressProps=function(){return{prefixCls:B.default.string,type:B.default.oneOf(U),percent:B.default.number,format:{type:Function},status:B.default.oneOf(G),showInfo:B.default.looseBool,strokeWidth:B.default.number,strokeLinecap:B.default.oneOf((0,E.tuple)("butt","round","square")),strokeColor:{type:[String,Object]},trailColor:B.default.string,width:B.default.number,success:{type:Object,default:function(){return{}}},gapDegree:B.default.number,gapPosition:B.default.oneOf((0,E.tuple)("top","bottom","left","right")),size:B.default.oneOf(W),steps:B.default.number,successPercent:B.default.number}};const K=v({props:d(u({},J()),{strokeColor:{type:[String,Object,Function]}}),setup(e){const a=e,t=y((()=>"function"==typeof a.strokeColor?d(u({},a),{strokeColor:a.strokeColor(a.percent)}):d(u({},a),{strokeColor:a.strokeColor})));return(e,a)=>(_(),k(w(C),I(h(w(t))),null,16))}});const Q={class:"sys-server-stat-container"},R={class:"disk-info"},T={class:"disk-info--item"},X={class:"disk-info"},Y={class:"disk-info--item"};var Z=c(v(d(u({},{name:"SystemMonitorServe"}),{setup(e){let a=-1;const t=O({runtime:{os:"",arch:"",nodeVersion:"",npmVersion:""},disk:{size:0,used:0,available:0},memory:{total:0,available:0},cpu:{manufacturer:"",brand:"",physicalCores:0,model:"",speed:0,rawCurrentLoad:0,rawCurrentLoadIdle:0,coresLoad:[]}}),{runtime:l,disk:s,memory:r,cpu:o}=g(t),u=y((()=>({size:f(s.value.size),used:f(s.value.used),available:f(s.value.available)}))),d=y((()=>({total:f(r.value.total),free:f(r.value.available),used:f(r.value.total-r.value.available)}))),c=y((()=>s.value.size<=0?0:Math.floor(s.value.used/s.value.size*100))),p=y((()=>r.value.total<=0?0:Math.floor((r.value.total-r.value.available)/r.value.total*100))),b=y((()=>`${o.value.manufacturer} ${o.value.brand} @ ${o.value.speed}GHz`)),m=async()=>{const e=await n({url:i.stat,method:"get"});l.value=e.runtime,s.value=e.disk,r.value=e.memory,o.value=e.cpu};m();const v=e=>e<30?"#5cb87a":e<70?"#e6a23c":"#f53f3f",I=(e,a)=>a<=0?0:Math.floor(e/a*100);return j((()=>{a=setInterval(m,1e4)})),P((()=>{clearInterval(a)})),(e,a)=>(_(),z("div",Q,[L(w($),{class:"stat-card",title:"运行环境"},{default:M((()=>[L(w(S),{column:1,"label-style":{width:"50%"}},{default:M((()=>[L(w(S).Item,{label:"操作系统"},{default:M((()=>[x(N(w(l).os),1)])),_:1}),L(w(S).Item,{label:"系统架构"},{default:M((()=>[x(N(w(l).arch),1)])),_:1}),L(w(S).Item,{label:"Node版本"},{default:M((()=>[L(w(V),{color:"processing",size:"small"},{default:M((()=>[x("v"+N(w(l).nodeVersion),1)])),_:1})])),_:1}),L(w(S).Item,{label:"NPM版本"},{default:M((()=>[L(w(V),{color:"processing",size:"small"},{default:M((()=>[x("v"+N(w(l).npmVersion),1)])),_:1})])),_:1})])),_:1})])),_:1}),L(w($),{class:"stat-card",title:"CPU"},{default:M((()=>[L(w(S),{column:1,"label-style":{width:"50%"},"content-style":{width:"50%"}},{default:M((()=>[L(w(S).Item,{label:"详细"},{default:M((()=>[x(N(w(b)),1)])),_:1}),L(w(S).Item,{label:"负载"},{default:M((()=>[L(K,{percent:I(w(o).rawCurrentLoad,w(o).rawCurrentLoadIdle+w(o).rawCurrentLoad),strokeColor:v},null,8,["percent"])])),_:1}),(_(!0),z(F,null,D(w(o).coresLoad,((e,a)=>(_(),k(w(S).Item,{key:a,label:`核心${a+1} 负载`},{default:M((()=>[L(K,{percent:I(e.rawLoad,e.rawLoad+e.rawLoadIdle),strokeColor:v},null,8,["percent"])])),_:2},1032,["label"])))),128))])),_:1})])),_:1}),L(w($),{class:"stat-card",title:"磁盘"},{default:M((()=>[H("div",R,[L(w(S),{class:"disk-info--item",column:1},{default:M((()=>[L(w(S).Item,{label:"总空间"},{default:M((()=>[x(N(w(u).size),1)])),_:1}),L(w(S).Item,{label:"已用空间"},{default:M((()=>[x(N(w(u).used),1)])),_:1}),L(w(S).Item,{label:"可用空间"},{default:M((()=>[x(N(w(u).available),1)])),_:1})])),_:1}),H("div",T,[L(K,{type:"dashboard",percent:w(c),width:100,strokeColor:v},null,8,["percent"])])])])),_:1}),L(w($),{class:"stat-card",title:"内存"},{default:M((()=>[H("div",X,[L(w(S),{class:"disk-info--item",column:1},{default:M((()=>[L(w(S).Item,{label:"总内存"},{default:M((()=>[x(N(w(d).total),1)])),_:1}),L(w(S).Item,{label:"已用内存"},{default:M((()=>[x(N(w(d).used),1)])),_:1}),L(w(S).Item,{label:"可用内存"},{default:M((()=>[x(N(w(d).free),1)])),_:1})])),_:1}),H("div",Y,[L(K,{type:"dashboard",percent:w(p),width:100,strokeColor:v},null,8,["percent"])])])])),_:1})]))}})),[["__scopeId","data-v-ed595d20"]]);export{Z as default};
